generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model InventoryItem {
  item_id       String          @id @db.VarChar(10)
  f_item_id     String          @db.VarChar(10)
  category_id   String
  item_name     String          @db.VarChar(100)
  unit_measure  String          @db.VarChar(20)
  current_stock Int             @default(0)
  reorder_level Int             @default(0)
  status        InventoryStatus
  date_created  DateTime        @default(now())
  date_updated  DateTime        @updatedAt
  isdeleted     Boolean         @default(false)
  created_by    Int
  batches       Batch[]
  category      Category        @relation(fields: [category_id], references: [category_id])

  @@map("inventory_items")
}

model Batch {
  batch_id           String        @id @db.VarChar(10)
  item_id            String
  usable_quantity    Int           @default(0)
  defective_quantity Int           @default(0)
  missing_quantity   Int           @default(0)
  expiration_date    DateTime?
  date_created       DateTime      @default(now())
  created_by         Int
  isdeleted          Boolean       @default(false)
  inventoryItem      InventoryItem @relation(fields: [item_id], references: [item_id])

  @@map("batches")
}

model Category {
  category_id    String          @id @db.VarChar(10)
  category_name  String          @unique @db.VarChar(100)
  date_created   DateTime        @default(now())
  isdeleted      Boolean         @default(false)
  inventoryItems InventoryItem[]

  @@map("categories")
}

enum InventoryStatus {
  LOW_STOCK
  AVAILABLE
  OUT_OF_STOCK
  UNDER_MAINTENANCE
  EXPIRED
}
